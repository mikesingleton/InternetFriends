_backgroundPortManager=null;var backgroundPortManager=function(e,n){var t={},r={},a=null,o=null;return t.init=function(e,n){if(a=e,o=n,_backgroundPortManager=this,_portManagers&&_portManagers.length)for(var r=0;r<_portManagers.length;r++)t.processTabPortConnected(_portManagers[r]);Logger.log("backgroundPortManager init")},t.processTabPortConnected=function(e){var n=1,t=e.source,o="internetfriendswebsite";Logger.log("tab connected: "+n),r[n]||(r[n]={}),r[n][t]=e,r[n]["InternetFriends-chat"]&&r[n]["InternetFriends-main"]&&(r[n]["InternetFriends-main"].postMessage({event:"loaded",data:{}}),r[n]["InternetFriends-chat"].postMessage({event:"loaded",data:{}})),a({event:"tabConnected",data:{}},o)},t.postMessage=function(e,n,r,o){a(e,o),"InternetFriends-chat"!=r&&(e.data.userId="localuser",t.tellByTabId(1,e))},t.tellByRoomCode=function(e,n){var t=1;return!!r[t]["InternetFriends-chat"]&&(r[t]["InternetFriends-chat"].postMessage(n),!0)},t.tellByTabId=function(e,n){var e=1;return!(!r[e]||!r[e]["InternetFriends-chat"])&&(r[e]["InternetFriends-chat"].postMessage(n),!0)},t.init(e,n),t};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvYmFja2dyb3VuZFBvcnRNYW5hZ2VyLmpzIl0sIm5hbWVzIjpbIl9iYWNrZ3JvdW5kUG9ydE1hbmFnZXIiLCJiYWNrZ3JvdW5kUG9ydE1hbmFnZXIiLCJtZXNzYWdlQ2FsbGJhY2siLCJyb29tRGlzY29ubmVjdENhbGxiYWNrIiwiX3RoaXMiLCJfb3BlblRhYnMiLCJfbWVzc2FnZUNhbGxiYWNrIiwiX3Jvb21EaXNjb25uZWN0Q2FsbGJhY2siLCJpbml0IiwidGhpcyIsIl9wb3J0TWFuYWdlcnMiLCJsZW5ndGgiLCJpIiwicHJvY2Vzc1RhYlBvcnRDb25uZWN0ZWQiLCJMb2dnZXIiLCJsb2ciLCJwb3J0IiwidGFiSWQiLCJzb3VyY2UiLCJyb29tQ29kZSIsInBvc3RNZXNzYWdlIiwiZXZlbnQiLCJkYXRhIiwibWVzc2FnZSIsInVzZXJJZCIsInRlbGxCeVRhYklkIiwidGVsbEJ5Um9vbUNvZGUiXSwibWFwcGluZ3MiOiJBQUNBQSx1QkFBeUIsSUFFekIsSUFBSUMsdUJBQXdCLFNBQVVDLEVBQWlCQyxHQUV0RCxHQUFJQyxNQUNHQyxLQUNOQyxFQUF1QixLQUN2QkMsRUFBMEIsSUFnRjNCLE9BN0VBSCxHQUFNSSxLQUFPLFNBQVVOLEVBQWlCQyxHQUt2QyxHQUpBRyxFQUFtQkosRUFDbkJLLEVBQTBCSixFQUMxQkgsdUJBQXlCUyxLQUVyQkMsZUFBaUJBLGNBQWNDLE9BRWxDLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRixjQUFjQyxPQUFRQyxJQUN6Q1IsRUFBTVMsd0JBQXdCSCxjQUFjRSxHQUk5Q0UsUUFBT0MsSUFBSSwrQkFNWlgsRUFBTVMsd0JBQTBCLFNBQVVHLEdBQ3pDLEdBQUlDLEdBQVEsRUFDUkMsRUFBU0YsRUFBS0UsT0FDZEMsRUFBVyx3QkFFZkwsUUFBT0MsSUFBSSxrQkFBb0JFLEdBRzNCWixFQUFVWSxLQUNiWixFQUFVWSxPQUVYWixFQUFVWSxHQUFPQyxHQUFVRixFQUV4QlgsRUFBVVksR0FBTyx5QkFDbkJaLEVBQVVZLEdBQU8sMEJBRWpCWixFQUFVWSxHQUFPLHdCQUF3QkcsYUFBYUMsTUFBTyxTQUFVQyxVQUN2RWpCLEVBQVVZLEdBQU8sd0JBQXdCRyxhQUFhQyxNQUFPLFNBQVVDLFdBR3hFaEIsR0FBa0JlLE1BQU0sZUFBZ0JDLFNBQVdILElBSXBEZixFQUFNZ0IsWUFBYyxTQUFVRyxFQUFTTixFQUFPQyxFQUFRQyxHQUNyRGIsRUFBaUJpQixFQUFTSixHQUtQLHdCQUFWRCxJQUNDSyxFQUFRRCxLQUFLRSxPQUFTLFlBQ3RCcEIsRUFBTXFCLFlBQVksRUFBR0YsS0FJaENuQixFQUFNc0IsZUFBaUIsU0FBVVAsRUFBVUcsR0FDMUMsR0FBSUwsR0FBUSxDQUNaLFNBQUdaLEVBQVVZLEdBQU8sMEJBQ25CWixFQUFVWSxHQUFPLHdCQUF3QkcsWUFBWUUsSUFDOUMsSUFNTmxCLEVBQU1xQixZQUFjLFNBQVVSLEVBQU9LLEdBQ3ZDLEdBQUlMLEdBQVEsQ0FDTixVQUFHWixFQUFVWSxLQUFVWixFQUFVWSxHQUFPLDJCQUNwQ1osRUFBVVksR0FBTyx3QkFBd0JHLFlBQVlFLElBQzlDLElBT2xCbEIsRUFBTUksS0FBS04sRUFBaUJDLEdBRXJCQyIsImZpbGUiOiJzY3JpcHRzL2JhY2tncm91bmRQb3J0TWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5fYmFja2dyb3VuZFBvcnRNYW5hZ2VyID0gbnVsbDtcclxuXHJcbnZhciBiYWNrZ3JvdW5kUG9ydE1hbmFnZXIgPSBmdW5jdGlvbiAobWVzc2FnZUNhbGxiYWNrLCByb29tRGlzY29ubmVjdENhbGxiYWNrKXtcclxuXHQvLyB2YXJpYWJsZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdHZhciBfdGhpcyBcdFx0XHRcdCAgICA9IHt9LFxyXG4gICAgICAgIF9vcGVuVGFicyBcdFx0XHQgICAgPSB7fSxcclxuXHRcdF9tZXNzYWdlQ2FsbGJhY2tcdCAgICA9IG51bGwsXHJcblx0XHRfcm9vbURpc2Nvbm5lY3RDYWxsYmFja1x0PSBudWxsO1xyXG5cdFxyXG5cdC8vIGluaXRpYWxpemUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0X3RoaXMuaW5pdCA9IGZ1bmN0aW9uIChtZXNzYWdlQ2FsbGJhY2ssIHJvb21EaXNjb25uZWN0Q2FsbGJhY2spe1xyXG5cdFx0X21lc3NhZ2VDYWxsYmFjayA9IG1lc3NhZ2VDYWxsYmFjaztcclxuXHRcdF9yb29tRGlzY29ubmVjdENhbGxiYWNrID0gcm9vbURpc2Nvbm5lY3RDYWxsYmFjaztcclxuXHRcdF9iYWNrZ3JvdW5kUG9ydE1hbmFnZXIgPSB0aGlzO1xyXG5cclxuXHRcdGlmIChfcG9ydE1hbmFnZXJzICYmIF9wb3J0TWFuYWdlcnMubGVuZ3RoKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IF9wb3J0TWFuYWdlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRfdGhpcy5wcm9jZXNzVGFiUG9ydENvbm5lY3RlZChfcG9ydE1hbmFnZXJzW2ldKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdExvZ2dlci5sb2coJ2JhY2tncm91bmRQb3J0TWFuYWdlciBpbml0Jyk7XHJcblx0fTtcclxuXHRcclxuXHQvLyBwcml2YXRlIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0X3RoaXMucHJvY2Vzc1RhYlBvcnRDb25uZWN0ZWQgPSBmdW5jdGlvbiAocG9ydCl7XHJcblx0XHR2YXIgdGFiSWQgPSAxO1xyXG5cdFx0dmFyIHNvdXJjZSA9IHBvcnQuc291cmNlO1xyXG5cdFx0dmFyIHJvb21Db2RlID0gXCJpbnRlcm5ldGZyaWVuZHN3ZWJzaXRlXCI7XHJcblxyXG5cdFx0TG9nZ2VyLmxvZygndGFiIGNvbm5lY3RlZDogJyArIHRhYklkKVxyXG5cclxuXHRcdC8vIEFkZCBwb3J0IHRvIHRhYlxyXG5cdFx0aWYoIV9vcGVuVGFic1t0YWJJZF0pIFxyXG5cdFx0XHRfb3BlblRhYnNbdGFiSWRdID0ge307XHJcblxyXG5cdFx0X29wZW5UYWJzW3RhYklkXVtzb3VyY2VdID0gcG9ydDtcclxuXHJcblx0XHRpZihfb3BlblRhYnNbdGFiSWRdWydJbnRlcm5ldEZyaWVuZHMtY2hhdCddICYmXHJcblx0XHRcdF9vcGVuVGFic1t0YWJJZF1bJ0ludGVybmV0RnJpZW5kcy1tYWluJ10pXHJcblx0XHR7XHJcblx0XHRcdF9vcGVuVGFic1t0YWJJZF1bJ0ludGVybmV0RnJpZW5kcy1tYWluJ10ucG9zdE1lc3NhZ2Uoe2V2ZW50OiAnbG9hZGVkJywgZGF0YToge319KTtcclxuXHRcdFx0X29wZW5UYWJzW3RhYklkXVsnSW50ZXJuZXRGcmllbmRzLWNoYXQnXS5wb3N0TWVzc2FnZSh7ZXZlbnQ6ICdsb2FkZWQnLCBkYXRhOiB7fX0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdF9tZXNzYWdlQ2FsbGJhY2soe2V2ZW50Oid0YWJDb25uZWN0ZWQnLCBkYXRhOiB7fX0sIHJvb21Db2RlKTtcclxuICAgIH07XHJcblxyXG5cdC8vIHB1YmxpYyBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHRcclxuXHRfdGhpcy5wb3N0TWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlLCB0YWJJZCwgc291cmNlLCByb29tQ29kZSkge1xyXG5cdFx0X21lc3NhZ2VDYWxsYmFjayhtZXNzYWdlLCByb29tQ29kZSk7XHJcblx0XHRcclxuXHRcdC8vTG9nZ2VyLmxvZyhtZXNzYWdlKTtcclxuXHJcbiAgICAgICAgLy8gRm9yd2FyZCB0byBpZnJhbWVcclxuICAgICAgICBpZihzb3VyY2UgIT0gJ0ludGVybmV0RnJpZW5kcy1jaGF0Jykge1xyXG4gICAgICAgICAgICBtZXNzYWdlLmRhdGEudXNlcklkID0gXCJsb2NhbHVzZXJcIjtcclxuICAgICAgICAgICAgX3RoaXMudGVsbEJ5VGFiSWQoMSwgbWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG5cdH1cclxuXHJcblx0X3RoaXMudGVsbEJ5Um9vbUNvZGUgPSBmdW5jdGlvbiAocm9vbUNvZGUsIGRhdGEpe1xyXG5cdFx0dmFyIHRhYklkID0gMTtcclxuXHRcdGlmKF9vcGVuVGFic1t0YWJJZF1bXCJJbnRlcm5ldEZyaWVuZHMtY2hhdFwiXSkge1xyXG5cdFx0XHRfb3BlblRhYnNbdGFiSWRdW1wiSW50ZXJuZXRGcmllbmRzLWNoYXRcIl0ucG9zdE1lc3NhZ2UoZGF0YSk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBfdGhpcy50ZWxsQnlUYWJJZCA9IGZ1bmN0aW9uICh0YWJJZCwgZGF0YSl7XHJcblx0XHR2YXIgdGFiSWQgPSAxO1xyXG4gICAgICAgIGlmKF9vcGVuVGFic1t0YWJJZF0gJiYgX29wZW5UYWJzW3RhYklkXVtcIkludGVybmV0RnJpZW5kcy1jaGF0XCJdKSB7XHJcbiAgICAgICAgICAgIF9vcGVuVGFic1t0YWJJZF1bXCJJbnRlcm5ldEZyaWVuZHMtY2hhdFwiXS5wb3N0TWVzc2FnZShkYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblx0fTtcclxuXHJcblx0Ly8gbWVzc2FnZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cdFxyXG5cdF90aGlzLmluaXQobWVzc2FnZUNhbGxiYWNrLCByb29tRGlzY29ubmVjdENhbGxiYWNrKTtcclxuXHRcclxuXHRyZXR1cm4gX3RoaXM7XHJcbn07Il19
